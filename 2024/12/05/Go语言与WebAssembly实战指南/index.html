<!DOCTYPE html>
<html lang="zh-CN">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/Bopop-logo.png">
  <link rel="icon" type="image/png" href="/img/Bopop-logo.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="This v blog">
  <meta name="author" content="BoDen">
  <meta name="keywords" content="Bopop,blog,åšå®¢,PHP,Python,Golang">
  <title>ğŸŒ Goè¯­è¨€ä¸WebAssemblyå®æˆ˜æŒ‡å— - Bopop</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/github-gist.min.css" />
  

  


<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_yg9cfy8wd6.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_pjno9b9zyxs.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


  <script  src="/js/utils.js" ></script>
<meta name="generator" content="Hexo 5.0.2"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Bopop</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background" parallax=true
         style="background: url('/img/pexels.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
                ğŸŒ Goè¯­è¨€ä¸WebAssemblyå®æˆ˜æŒ‡å—
              
            </span>

            
              
  <div class="mt-3 post-meta">
    <i class="iconfont icon-date-fill" aria-hidden="true"></i>
    <time datetime="2024-12-05 14:20">
      2024å¹´12æœˆ5æ—¥ ä¸‹åˆ
    </time>
  </div>


<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      4k å­—
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      61
       åˆ†é’Ÿ
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <div class="post-content mx-auto" id="post">
            
            <article class="markdown-body">
              <h1>ğŸŒ Goè¯­è¨€ä¸WebAssemblyå®æˆ˜æŒ‡å—</h1>
<p>WebAssembly(ç®€ç§°Wasm)ä½œä¸ºä¸€ç§æ–°å…´çš„webæŠ€æœ¯ï¼Œè®©æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œæ¥è¿‘åŸç”Ÿæ€§èƒ½çš„ä»£ç ã€‚è€ŒGoè¯­è¨€ä»1.11ç‰ˆæœ¬å¼€å§‹å·²ç»æ”¯æŒç¼–è¯‘åˆ°WebAssemblyï¼Œè¿™ä¸ºGoå¼€å‘è€…æ‰“å¼€äº†ä¸€æ‰‡é€šå‘å‰ç«¯ä¸–ç•Œçš„å¤§é—¨ã€‚æœ¬æ–‡å°†åˆ†äº«æˆ‘åœ¨ä½¿ç”¨Go+WebAssemblyå¼€å‘è¿‡ç¨‹ä¸­çš„å®æˆ˜ç»éªŒã€‚</p>
<h2 id="ğŸ“š-WebAssemblyç®€ä»‹"><a class="header-anchor" href="#ğŸ“š-WebAssemblyç®€ä»‹"></a>ğŸ“š WebAssemblyç®€ä»‹</h2>
<p>WebAssemblyæ˜¯ä¸€ç§ä½çº§å­—èŠ‚ç æ ¼å¼ï¼Œè®¾è®¡ç›®æ ‡æ˜¯æˆä¸ºé«˜æ€§èƒ½webåº”ç”¨çš„ä¾¿æºå¼ç¼–è¯‘ç›®æ ‡ã€‚å®ƒä¸»è¦ç‰¹ç‚¹æœ‰ï¼š</p>
<ul>
<li>âš¡ <strong>æ¥è¿‘åŸç”Ÿçš„æ‰§è¡Œé€Ÿåº¦</strong>ï¼šæ¯”JavaScriptå¿«å¾—å¤š</li>
<li>ğŸ”’ <strong>å®‰å…¨çš„æ²™ç›’æ‰§è¡Œç¯å¢ƒ</strong>ï¼šå†…å­˜å®‰å…¨ï¼Œä¸èƒ½ç›´æ¥è®¿é—®å®¿ä¸»ç¯å¢ƒ</li>
<li>ğŸŒ‰ <strong>ä¸JavaScriptçš„äº’æ“ä½œæ€§</strong>ï¼šå¯ä»¥ä¸JSä»£ç äº¤äº’</li>
<li>ğŸ”„ <strong>ä¸Web APIçš„äº’æ“ä½œ</strong>ï¼šå¯ä»¥è°ƒç”¨DOMç­‰Web API</li>
</ul>
<p>ä¸JavaScriptç›¸æ¯”ï¼ŒWebAssemblyçš„ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Ÿ</p>
<table>
<thead>
<tr>
<th>ç‰¹ç‚¹</th>
<th>JavaScript</th>
<th>WebAssembly</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ‰§è¡Œé€Ÿåº¦</td>
<td>è¾ƒæ…¢</td>
<td>æ¥è¿‘åŸç”Ÿ</td>
</tr>
<tr>
<td>åŠ è½½æ—¶é—´</td>
<td>éœ€è¦è§£æ</td>
<td>äºŒè¿›åˆ¶æ ¼å¼ï¼ŒåŠ è½½å¿«</td>
</tr>
<tr>
<td>å¼€å‘è¯­è¨€</td>
<td>JavaScript/TypeScript</td>
<td>C/C++/Rust/Goç­‰</td>
</tr>
<tr>
<td>å†…å­˜æ§åˆ¶</td>
<td>è‡ªåŠ¨åƒåœ¾å›æ”¶</td>
<td>æ›´ç²¾ç»†çš„å†…å­˜ç®¡ç†</td>
</tr>
<tr>
<td>å­¦ä¹ æ›²çº¿</td>
<td>ç›¸å¯¹ç®€å•</td>
<td>å–å†³äºæºè¯­è¨€</td>
</tr>
</tbody>
</table>
<h2 id="ğŸ› ï¸-ç¯å¢ƒæ­å»º"><a class="header-anchor" href="#ğŸ› ï¸-ç¯å¢ƒæ­å»º"></a>ğŸ› ï¸ ç¯å¢ƒæ­å»º</h2>
<p>è¦å¼€å§‹ä½¿ç”¨Go+WebAssemblyï¼Œé¦–å…ˆéœ€è¦ç¡®ä¿ä½ çš„ç¯å¢ƒå·²ç»å‡†å¤‡å¥½ï¼š</p>
<h3 id="1-Goç¯å¢ƒå‡†å¤‡"><a class="header-anchor" href="#1-Goç¯å¢ƒå‡†å¤‡"></a>1. Goç¯å¢ƒå‡†å¤‡</h3>
<p>ç¡®ä¿ä½ å·²å®‰è£…Go 1.11æˆ–æ›´é«˜ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs bash"><span class="hljs-comment"># æ£€æŸ¥Goç‰ˆæœ¬</span>
go version

<span class="hljs-comment"># åº”å½“çœ‹åˆ°ç±»ä¼¼è¾“å‡º</span>
go version go1.21.0 windows/amd64</code></pre>
<h3 id="2-è®¾ç½®GOOSå’ŒGOARCH"><a class="header-anchor" href="#2-è®¾ç½®GOOSå’ŒGOARCH"></a>2. è®¾ç½®GOOSå’ŒGOARCH</h3>
<p>ç¼–è¯‘WebAssemblyéœ€è¦è®¾ç½®ç‰¹å®šçš„ç¯å¢ƒå˜é‡ï¼š</p>
<pre><code class="hljs bash"><span class="hljs-comment"># Linux/macOS</span>
<span class="hljs-built_in">export</span> GOOS=js
<span class="hljs-built_in">export</span> GOARCH=wasm

<span class="hljs-comment"># Windows (PowerShell)</span>
<span class="hljs-variable">$env</span>:GOOS = <span class="hljs-string">&quot;js&quot;</span>
<span class="hljs-variable">$env</span>:GOARCH = <span class="hljs-string">&quot;wasm&quot;</span></code></pre>
<h3 id="3-å¤åˆ¶WebAssemblyæ”¯æŒæ–‡ä»¶"><a class="header-anchor" href="#3-å¤åˆ¶WebAssemblyæ”¯æŒæ–‡ä»¶"></a>3. å¤åˆ¶WebAssemblyæ”¯æŒæ–‡ä»¶</h3>
<p>Goæä¾›äº†ä¸€ä¸ªJavaScriptæ–‡ä»¶ï¼Œå¸®åŠ©åŠ è½½å’Œè¿è¡ŒWebAssemblyæ¨¡å—ï¼š</p>
<pre><code class="hljs bash"><span class="hljs-comment"># å¤åˆ¶wasm_exec.jsåˆ°ä½ çš„é¡¹ç›®ç›®å½•</span>
cp <span class="hljs-string">&quot;<span class="hljs-subst">$(go env GOROOT)</span>/misc/wasm/wasm_exec.js&quot;</span> ./</code></pre>
<h2 id="ğŸš€-ä½ å¥½ï¼ŒWebAssemblyï¼"><a class="header-anchor" href="#ğŸš€-ä½ å¥½ï¼ŒWebAssemblyï¼"></a>ğŸš€ ä½ å¥½ï¼ŒWebAssemblyï¼</h2>
<p>è®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„ä¾‹å­å¼€å§‹ï¼Œåˆ›å»ºä¸€ä¸ªHello Worldåº”ç”¨ï¼š</p>
<h3 id="1-åˆ›å»ºGoæ–‡ä»¶"><a class="header-anchor" href="#1-åˆ›å»ºGoæ–‡ä»¶"></a>1. åˆ›å»ºGoæ–‡ä»¶</h3>
<p>åˆ›å»ºmain.goæ–‡ä»¶ï¼š</p>
<pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;syscall/js&quot;</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªJavaScriptå‡½æ•°</span>
    hello := js.FuncOf(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(this js.Value, args []js.Value)</span> <span class="hljs-title">interface</span></span>&#123;&#125; &#123;
        name := <span class="hljs-string">&quot;World&quot;</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(args) &gt; <span class="hljs-number">0</span> &#123;
            name = args[<span class="hljs-number">0</span>].String()
        &#125;
        msg := <span class="hljs-string">&quot;Hello, &quot;</span> + name + <span class="hljs-string">&quot;!&quot;</span>
        
        <span class="hljs-comment">// è°ƒç”¨JavaScriptçš„console.logå‡½æ•°</span>
        js.Global().Get(<span class="hljs-string">&quot;console&quot;</span>).Call(<span class="hljs-string">&quot;log&quot;</span>, msg)
        
        <span class="hljs-comment">// è¿”å›æ¶ˆæ¯</span>
        <span class="hljs-keyword">return</span> msg
    &#125;)

    <span class="hljs-comment">// å°†å‡½æ•°å¯¼å‡ºåˆ°JavaScriptå…¨å±€ç©ºé—´</span>
    js.Global().Set(<span class="hljs-string">&quot;goHello&quot;</span>, hello)

    <span class="hljs-comment">// ä¿æŒç¨‹åºè¿è¡Œ</span>
    <span class="hljs-keyword">select</span> &#123;&#125;
&#125;</code></pre>
<h3 id="2-ç¼–è¯‘ä¸ºWebAssembly"><a class="header-anchor" href="#2-ç¼–è¯‘ä¸ºWebAssembly"></a>2. ç¼–è¯‘ä¸ºWebAssembly</h3>
<pre><code class="hljs bash">GOOS=js GOARCH=wasm go build -o main.wasm</code></pre>
<h3 id="3-åˆ›å»ºHTMLæ–‡ä»¶"><a class="header-anchor" href="#3-åˆ›å»ºHTMLæ–‡ä»¶"></a>3. åˆ›å»ºHTMLæ–‡ä»¶</h3>
<p>åˆ›å»ºindex.htmlæ–‡ä»¶ï¼š</p>
<pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Go WebAssembly<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;wasm_exec.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>
<span class="javascript">        <span class="hljs-keyword">const</span> go = <span class="hljs-keyword">new</span> Go();</span>
<span class="javascript">        WebAssembly.instantiateStreaming(fetch(<span class="hljs-string">&quot;main.wasm&quot;</span>), go.importObject)</span>
<span class="javascript">            .then(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> &#123;</span>
                go.run(result.instance);
                
<span class="javascript">                <span class="hljs-comment">// ç°åœ¨å¯ä»¥è°ƒç”¨æˆ‘ä»¬åœ¨Goä¸­å®šä¹‰çš„å‡½æ•°</span></span>
<span class="javascript">                <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;btn&quot;</span>).addEventListener(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span>
<span class="javascript">                    <span class="hljs-keyword">const</span> name = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;name&quot;</span>).value || <span class="hljs-string">&quot;World&quot;</span>;</span>
<span class="javascript">                    <span class="hljs-keyword">const</span> result = goHello(name);</span>
<span class="javascript">                    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;output&quot;</span>).textContent = result;</span>
                &#125;);
            &#125;);
    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Go WebAssembly ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;è¾“å…¥ä½ çš„åå­—&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>é—®å€™<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;output&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre>
<h3 id="4-å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨"><a class="header-anchor" href="#4-å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨"></a>4. å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨</h3>
<p>ç”±äºæµè§ˆå™¨çš„å®‰å…¨é™åˆ¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨HTTPæœåŠ¡å™¨æ¥æä¾›æ–‡ä»¶ï¼š</p>
<pre><code class="hljs bash"><span class="hljs-comment"># ä½¿ç”¨Goè‡ªå¸¦çš„HTTPæœåŠ¡å™¨</span>
go run -v server.go</code></pre>
<p>server.go å†…å®¹ï¼š</p>
<pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">&quot;flag&quot;</span>
    <span class="hljs-string">&quot;log&quot;</span>
    <span class="hljs-string">&quot;net/http&quot;</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
    port := flag.String(<span class="hljs-string">&quot;p&quot;</span>, <span class="hljs-string">&quot;8080&quot;</span>, <span class="hljs-string">&quot;ç«¯å£å·&quot;</span>)
    directory := flag.String(<span class="hljs-string">&quot;d&quot;</span>, <span class="hljs-string">&quot;.&quot;</span>, <span class="hljs-string">&quot;è¦æä¾›çš„ç›®å½•&quot;</span>)
    flag.Parse()

    http.Handle(<span class="hljs-string">&quot;/&quot;</span>, http.FileServer(http.Dir(*directory)))

    log.Printf(<span class="hljs-string">&quot;æœåŠ¡å™¨å¯åŠ¨åœ¨ http://localhost:%s&quot;</span>, *port)
    log.Fatal(http.ListenAndServe(<span class="hljs-string">&quot;:&quot;</span>+*port, <span class="hljs-literal">nil</span>))
&#125;</code></pre>
<h2 id="ğŸ’¡-Goä¸JavaScriptäº¤äº’"><a class="header-anchor" href="#ğŸ’¡-Goä¸JavaScriptäº¤äº’"></a>ğŸ’¡ Goä¸JavaScriptäº¤äº’</h2>
<p>Goå’ŒJavaScriptä¹‹é—´çš„äº¤äº’æ˜¯ä½¿ç”¨WebAssemblyçš„æ ¸å¿ƒï¼Œä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†äº†è§£å®ƒä»¬å¦‚ä½•é€šä¿¡ï¼š</p>
<h3 id="1-ä»Goè°ƒç”¨JavaScriptå‡½æ•°"><a class="header-anchor" href="#1-ä»Goè°ƒç”¨JavaScriptå‡½æ•°"></a>1. ä»Goè°ƒç”¨JavaScriptå‡½æ•°</h3>
<pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;syscall/js&quot;</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
    <span class="hljs-comment">// è·å–documentå¯¹è±¡</span>
    document := js.Global().Get(<span class="hljs-string">&quot;document&quot;</span>)
    
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„divå…ƒç´ </span>
    div := document.Call(<span class="hljs-string">&quot;createElement&quot;</span>, <span class="hljs-string">&quot;div&quot;</span>)
    div.Set(<span class="hljs-string">&quot;innerHTML&quot;</span>, <span class="hljs-string">&quot;è¿™ä¸ªdivæ˜¯ç”±Goåˆ›å»ºçš„ï¼&quot;</span>)
    
    <span class="hljs-comment">// å°†divæ·»åŠ åˆ°body</span>
    document.Get(<span class="hljs-string">&quot;body&quot;</span>).Call(<span class="hljs-string">&quot;appendChild&quot;</span>, div)
    
    <span class="hljs-comment">// é˜²æ­¢ç¨‹åºé€€å‡º</span>
    <span class="hljs-keyword">select</span> &#123;&#125;
&#125;</code></pre>
<h3 id="2-å‘JavaScriptæš´éœ²Goå‡½æ•°"><a class="header-anchor" href="#2-å‘JavaScriptæš´éœ²Goå‡½æ•°"></a>2. å‘JavaScriptæš´éœ²Goå‡½æ•°</h3>
<pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">&quot;fmt&quot;</span>
    <span class="hljs-string">&quot;syscall/js&quot;</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">calculateFactorial</span><span class="hljs-params">(this js.Value, args []js.Value)</span> <span class="hljs-title">interface</span></span>&#123;&#125; &#123;
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(args) == <span class="hljs-number">0</span> &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;è¯·æä¾›ä¸€ä¸ªæ•°å­—&quot;</span>
    &#125;
    
    n := args[<span class="hljs-number">0</span>].Int()
    result := <span class="hljs-number">1</span>
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">2</span>; i &lt;= n; i++ &#123;
        result *= i
    &#125;
    
    <span class="hljs-keyword">return</span> result
&#125;

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
    <span class="hljs-comment">// å°†å‡½æ•°æ³¨å†Œåˆ°JavaScriptå…¨å±€ç©ºé—´</span>
    js.Global().Set(<span class="hljs-string">&quot;factorial&quot;</span>, js.FuncOf(calculateFactorial))
    
    fmt.Println(<span class="hljs-string">&quot;Go WebAssemblyå·²åˆå§‹åŒ–ï¼Œfactorialå‡½æ•°å·²å¯¼å‡º&quot;</span>)
    
    <span class="hljs-comment">// ä¿æŒç¨‹åºè¿è¡Œ</span>
    <span class="hljs-keyword">select</span> &#123;&#125;
&#125;</code></pre>
<p>åœ¨JavaScriptä¸­è°ƒç”¨ï¼š</p>
<pre><code class="hljs javascript"><span class="hljs-comment">// HTMLä¸­</span>
<span class="hljs-keyword">const</span> result = factorial(<span class="hljs-number">5</span>);  <span class="hljs-comment">// è¿”å›120</span></code></pre>
<h3 id="3-å›è°ƒå‡½æ•°å¤„ç†"><a class="header-anchor" href="#3-å›è°ƒå‡½æ•°å¤„ç†"></a>3. å›è°ƒå‡½æ•°å¤„ç†</h3>
<pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">&quot;syscall/js&quot;</span>
    <span class="hljs-string">&quot;time&quot;</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">asyncOperation</span><span class="hljs-params">(this js.Value, args []js.Value)</span> <span class="hljs-title">interface</span></span>&#123;&#125; &#123;
    <span class="hljs-comment">// æ£€æŸ¥å›è°ƒå‡½æ•°</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(args) == <span class="hljs-number">0</span> || !args[<span class="hljs-number">0</span>].InstanceOf(js.Global().Get(<span class="hljs-string">&quot;Function&quot;</span>)) &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;è¯·æä¾›å›è°ƒå‡½æ•°&quot;</span>
    &#125;
    
    callback := args[<span class="hljs-number">0</span>]
    
    <span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ</span>
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;
        time.Sleep(<span class="hljs-number">2</span> * time.Second)
        
        <span class="hljs-comment">// è°ƒç”¨JavaScriptå›è°ƒ</span>
        callback.Invoke(<span class="hljs-string">&quot;æ“ä½œå®Œæˆï¼&quot;</span>)
    &#125;()
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
&#125;

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
    js.Global().Set(<span class="hljs-string">&quot;performAsync&quot;</span>, js.FuncOf(asyncOperation))
    <span class="hljs-keyword">select</span> &#123;&#125;
&#125;</code></pre>
<p>åœ¨JavaScriptä¸­ä½¿ç”¨ï¼š</p>
<pre><code class="hljs javascript"><span class="hljs-comment">// HTMLä¸­</span>
performAsync(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> &#123;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;æ”¶åˆ°ç»“æœ:&quot;</span>, result);
&#125;);</code></pre>
<h2 id="ğŸ”„-æ•°æ®ç±»å‹è½¬æ¢"><a class="header-anchor" href="#ğŸ”„-æ•°æ®ç±»å‹è½¬æ¢"></a>ğŸ”„ æ•°æ®ç±»å‹è½¬æ¢</h2>
<p>Goå’ŒJavaScriptä¹‹é—´ä¼ é€’æ•°æ®éœ€è¦è¿›è¡Œç±»å‹è½¬æ¢ï¼Œä¸‹é¢æ˜¯å¸¸è§æ•°æ®ç±»å‹çš„å¤„ç†æ–¹æ³•ï¼š</p>
<h3 id="åŸºæœ¬ç±»å‹è½¬æ¢"><a class="header-anchor" href="#åŸºæœ¬ç±»å‹è½¬æ¢"></a>åŸºæœ¬ç±»å‹è½¬æ¢</h3>
<pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;syscall/js&quot;</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">typeConversionExample</span><span class="hljs-params">(this js.Value, args []js.Value)</span> <span class="hljs-title">interface</span></span>&#123;&#125; &#123;
    <span class="hljs-comment">// JavaScript -&gt; Go</span>
    jsString := args[<span class="hljs-number">0</span>].String()           <span class="hljs-comment">// string</span>
    jsNumber := args[<span class="hljs-number">1</span>].Float()            <span class="hljs-comment">// float64</span>
    jsInt := args[<span class="hljs-number">2</span>].Int()                 <span class="hljs-comment">// int</span>
    jsBool := args[<span class="hljs-number">3</span>].Bool()               <span class="hljs-comment">// bool</span>
    
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªJavaScriptå¯¹è±¡</span>
    result := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">interface</span>&#123;&#125;)
    result[<span class="hljs-string">&quot;stringSquared&quot;</span>] = jsString + jsString
    result[<span class="hljs-string">&quot;numberDoubled&quot;</span>] = jsNumber * <span class="hljs-number">2</span>
    result[<span class="hljs-string">&quot;intSquared&quot;</span>] = jsInt * jsInt
    result[<span class="hljs-string">&quot;boolInverted&quot;</span>] = !jsBool
    
    <span class="hljs-comment">// Go -&gt; JavaScript (ä½¿ç”¨mapè½¬æ¢ä¸ºJSå¯¹è±¡)</span>
    <span class="hljs-keyword">return</span> result
&#125;

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
    js.Global().Set(<span class="hljs-string">&quot;convertTypes&quot;</span>, js.FuncOf(typeConversionExample))
    <span class="hljs-keyword">select</span> &#123;&#125;
&#125;</code></pre>
<h3 id="æ•°ç»„å’Œåˆ‡ç‰‡è½¬æ¢"><a class="header-anchor" href="#æ•°ç»„å’Œåˆ‡ç‰‡è½¬æ¢"></a>æ•°ç»„å’Œåˆ‡ç‰‡è½¬æ¢</h3>
<pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">arrayExample</span><span class="hljs-params">(this js.Value, args []js.Value)</span> <span class="hljs-title">interface</span></span>&#123;&#125; &#123;
    <span class="hljs-comment">// å°†JavaScriptæ•°ç»„è½¬æ¢ä¸ºGoåˆ‡ç‰‡</span>
    jsArray := args[<span class="hljs-number">0</span>]
    length := jsArray.Length()
    goSlice := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">int</span>, length)
    
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; length; i++ &#123;
        goSlice[i] = jsArray.Index(i).Int()
    &#125;
    
    <span class="hljs-comment">// å¤„ç†æ•°æ®ï¼ˆå°†æ¯ä¸ªå…ƒç´ ç¿»å€ï¼‰</span>
    <span class="hljs-keyword">for</span> i := <span class="hljs-keyword">range</span> goSlice &#123;
        goSlice[i] *= <span class="hljs-number">2</span>
    &#125;
    
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„JavaScriptæ•°ç»„</span>
    jsResult := js.Global().Get(<span class="hljs-string">&quot;Array&quot;</span>).New(<span class="hljs-built_in">len</span>(goSlice))
    <span class="hljs-keyword">for</span> i, val := <span class="hljs-keyword">range</span> goSlice &#123;
        jsResult.SetIndex(i, val)
    &#125;
    
    <span class="hljs-keyword">return</span> jsResult
&#125;</code></pre>
<h3 id="å¤æ‚æ•°æ®ç»“æ„"><a class="header-anchor" href="#å¤æ‚æ•°æ®ç»“æ„"></a>å¤æ‚æ•°æ®ç»“æ„</h3>
<pre><code class="hljs go"><span class="hljs-keyword">type</span> Person <span class="hljs-keyword">struct</span> &#123;
    Name    <span class="hljs-keyword">string</span> <span class="hljs-string">`json:&quot;name&quot;`</span>
    Age     <span class="hljs-keyword">int</span>    <span class="hljs-string">`json:&quot;age&quot;`</span>
    IsAdmin <span class="hljs-keyword">bool</span>   <span class="hljs-string">`json:&quot;isAdmin&quot;`</span>
&#125;

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">structExample</span><span class="hljs-params">(this js.Value, args []js.Value)</span> <span class="hljs-title">interface</span></span>&#123;&#125; &#123;
    <span class="hljs-comment">// ä»JavaScriptå¯¹è±¡åˆ›å»ºGoç»“æ„ä½“</span>
    jsObj := args[<span class="hljs-number">0</span>]
    person := Person&#123;
        Name:    jsObj.Get(<span class="hljs-string">&quot;name&quot;</span>).String(),
        Age:     jsObj.Get(<span class="hljs-string">&quot;age&quot;</span>).Int(),
        IsAdmin: jsObj.Get(<span class="hljs-string">&quot;isAdmin&quot;</span>).Bool(),
    &#125;
    
    <span class="hljs-comment">// å¤„ç†æ•°æ®</span>
    person.Age++
    person.IsAdmin = !person.IsAdmin
    
    <span class="hljs-comment">// å°†Goç»“æ„ä½“è½¬å›JavaScriptå¯¹è±¡</span>
    result := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">interface</span>&#123;&#125;)
    result[<span class="hljs-string">&quot;name&quot;</span>] = person.Name
    result[<span class="hljs-string">&quot;age&quot;</span>] = person.Age
    result[<span class="hljs-string">&quot;isAdmin&quot;</span>] = person.IsAdmin
    
    <span class="hljs-keyword">return</span> result
&#125;</code></pre>
<h2 id="ğŸ“Š-å®æˆ˜æ¡ˆä¾‹ï¼šæµè§ˆå™¨ä¸­çš„æ•°æ®å¯è§†åŒ–"><a class="header-anchor" href="#ğŸ“Š-å®æˆ˜æ¡ˆä¾‹ï¼šæµè§ˆå™¨ä¸­çš„æ•°æ®å¯è§†åŒ–"></a>ğŸ“Š å®æˆ˜æ¡ˆä¾‹ï¼šæµè§ˆå™¨ä¸­çš„æ•°æ®å¯è§†åŒ–</h2>
<p>ç°åœ¨æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªå®ç”¨çš„ä¾‹å­ï¼šä¸€ä¸ªåœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨Goè¿›è¡Œæ•°æ®å¤„ç†å’Œå¯è§†åŒ–çš„åº”ç”¨ã€‚</p>
<h3 id="1-é¡¹ç›®ç»“æ„"><a class="header-anchor" href="#1-é¡¹ç›®ç»“æ„"></a>1. é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs awk">data-viz/
â”œâ”€â”€ main.go          <span class="hljs-regexp">//</span> Go WebAssemblyä»£ç 
â”œâ”€â”€ index.html       <span class="hljs-regexp">//</span> HTMLç•Œé¢
â”œâ”€â”€ style.css        <span class="hljs-regexp">//</span> æ ·å¼
â”œâ”€â”€ wasm_exec.js     <span class="hljs-regexp">//</span> Go WebAssemblyæ”¯æŒæ–‡ä»¶
â””â”€â”€ server.go        <span class="hljs-regexp">//</span> æœ¬åœ°æœåŠ¡å™¨</code></pre>
<h3 id="2-Goä»£ç ï¼ˆmain-goï¼‰"><a class="header-anchor" href="#2-Goä»£ç ï¼ˆmain-goï¼‰"></a>2. Goä»£ç ï¼ˆmain.goï¼‰</h3>
<pre><code class="hljs go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">&quot;encoding/json&quot;</span>
    <span class="hljs-string">&quot;math&quot;</span>
    <span class="hljs-string">&quot;syscall/js&quot;</span>
)

<span class="hljs-comment">// æ•°æ®ç‚¹ç»“æ„</span>
<span class="hljs-keyword">type</span> DataPoint <span class="hljs-keyword">struct</span> &#123;
    X <span class="hljs-keyword">float64</span> <span class="hljs-string">`json:&quot;x&quot;`</span>
    Y <span class="hljs-keyword">float64</span> <span class="hljs-string">`json:&quot;y&quot;`</span>
&#125;

<span class="hljs-comment">// ç”Ÿæˆæ­£å¼¦æ³¢æ•°æ®</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">generateSineWave</span><span class="hljs-params">(this js.Value, args []js.Value)</span> <span class="hljs-title">interface</span></span>&#123;&#125; &#123;
    <span class="hljs-comment">// ä»å‚æ•°è·å–ç‚¹æ•°å’ŒæŒ¯å¹…</span>
    points := <span class="hljs-number">100</span>
    amplitude := <span class="hljs-number">1.0</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(args) &gt; <span class="hljs-number">0</span> &#123;
        points = args[<span class="hljs-number">0</span>].Int()
    &#125;
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(args) &gt; <span class="hljs-number">1</span> &#123;
        amplitude = args[<span class="hljs-number">1</span>].Float()
    &#125;
    
    <span class="hljs-comment">// ç”Ÿæˆæ•°æ®ç‚¹</span>
    data := <span class="hljs-built_in">make</span>([]DataPoint, points)
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; points; i++ &#123;
        x := <span class="hljs-keyword">float64</span>(i) * (<span class="hljs-number">2</span> * math.Pi / <span class="hljs-keyword">float64</span>(points))
        y := amplitude * math.Sin(x)
        data[i] = DataPoint&#123;X: x, Y: y&#125;
    &#125;
    
    <span class="hljs-comment">// å°†æ•°æ®åºåˆ—åŒ–ä¸ºJSON</span>
    jsonData, _ := json.Marshal(data)
    
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªUint8Arrayæ¥å­˜å‚¨JSONæ•°æ®</span>
    uint8Array := js.Global().Get(<span class="hljs-string">&quot;Uint8Array&quot;</span>).New(<span class="hljs-built_in">len</span>(jsonData))
    js.CopyBytesToJS(uint8Array, jsonData)
    
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªTextDecoderæ¥å°†Uint8Arrayè½¬æ¢ä¸ºå­—ç¬¦ä¸²</span>
    decoder := js.Global().Get(<span class="hljs-string">&quot;TextDecoder&quot;</span>).New(<span class="hljs-string">&quot;utf-8&quot;</span>)
    result := decoder.Call(<span class="hljs-string">&quot;decode&quot;</span>, uint8Array)
    
    <span class="hljs-keyword">return</span> result
&#125;

<span class="hljs-comment">// è®¡ç®—ç§»åŠ¨å¹³å‡</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">calculateMovingAverage</span><span class="hljs-params">(this js.Value, args []js.Value)</span> <span class="hljs-title">interface</span></span>&#123;&#125; &#123;
    <span class="hljs-comment">// è§£æè¾“å…¥æ•°æ®</span>
    jsonStr := args[<span class="hljs-number">0</span>].String()
    windowSize := <span class="hljs-number">5</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(args) &gt; <span class="hljs-number">1</span> &#123;
        windowSize = args[<span class="hljs-number">1</span>].Int()
    &#125;
    
    <span class="hljs-comment">// è§£æJSONæ•°æ®</span>
    <span class="hljs-keyword">var</span> data []DataPoint
    <span class="hljs-keyword">if</span> err := json.Unmarshal([]<span class="hljs-keyword">byte</span>(jsonStr), &amp;data); err != <span class="hljs-literal">nil</span> &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;JSONè§£æé”™è¯¯&quot;</span>
    &#125;
    
    <span class="hljs-comment">// è®¡ç®—ç§»åŠ¨å¹³å‡</span>
    result := <span class="hljs-built_in">make</span>([]DataPoint, <span class="hljs-built_in">len</span>(data))
    <span class="hljs-keyword">for</span> i := <span class="hljs-keyword">range</span> data &#123;
        sum := <span class="hljs-number">0.0</span>
        count := <span class="hljs-number">0</span>
        
        <span class="hljs-comment">// è®¡ç®—çª—å£å†…çš„å¹³å‡å€¼</span>
        <span class="hljs-keyword">for</span> j := i - windowSize + <span class="hljs-number">1</span>; j &lt;= i; j++ &#123;
            <span class="hljs-keyword">if</span> j &gt;= <span class="hljs-number">0</span> &#123;
                sum += data[j].Y
                count++
            &#125;
        &#125;
        
        <span class="hljs-comment">// è®¾ç½®ç»“æœ</span>
        <span class="hljs-keyword">if</span> count &gt; <span class="hljs-number">0</span> &#123;
            result[i] = DataPoint&#123;X: data[i].X, Y: sum / <span class="hljs-keyword">float64</span>(count)&#125;
        &#125; <span class="hljs-keyword">else</span> &#123;
            result[i] = data[i]
        &#125;
    &#125;
    
    <span class="hljs-comment">// å°†ç»“æœåºåˆ—åŒ–ä¸ºJSON</span>
    jsonResult, _ := json.Marshal(result)
    
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªUint8Arrayæ¥å­˜å‚¨JSONæ•°æ®</span>
    uint8Array := js.Global().Get(<span class="hljs-string">&quot;Uint8Array&quot;</span>).New(<span class="hljs-built_in">len</span>(jsonResult))
    js.CopyBytesToJS(uint8Array, jsonResult)
    
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªTextDecoderæ¥å°†Uint8Arrayè½¬æ¢ä¸ºå­—ç¬¦ä¸²</span>
    decoder := js.Global().Get(<span class="hljs-string">&quot;TextDecoder&quot;</span>).New(<span class="hljs-string">&quot;utf-8&quot;</span>)
    <span class="hljs-keyword">return</span> decoder.Call(<span class="hljs-string">&quot;decode&quot;</span>, uint8Array)
&#125;

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;
    <span class="hljs-comment">// æ³¨å†Œå‡½æ•°åˆ°JavaScript</span>
    js.Global().Set(<span class="hljs-string">&quot;generateSineWave&quot;</span>, js.FuncOf(generateSineWave))
    js.Global().Set(<span class="hljs-string">&quot;calculateMovingAverage&quot;</span>, js.FuncOf(calculateMovingAverage))
    
    <span class="hljs-comment">// ä¿æŒç¨‹åºè¿è¡Œ</span>
    <span class="hljs-keyword">select</span> &#123;&#125;
&#125;</code></pre>
<h3 id="3-HTMLç•Œé¢ï¼ˆindex-htmlï¼‰"><a class="header-anchor" href="#3-HTMLç•Œé¢ï¼ˆindex-htmlï¼‰"></a>3. HTMLç•Œé¢ï¼ˆindex.htmlï¼‰</h3>
<pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Go WebAssembly æ•°æ®å¯è§†åŒ–<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;style.css&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;wasm_exec.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/chart.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>
<span class="javascript">        <span class="hljs-comment">// åˆå§‹åŒ–Go WebAssembly</span></span>
<span class="javascript">        <span class="hljs-keyword">const</span> go = <span class="hljs-keyword">new</span> Go();</span>
<span class="javascript">        WebAssembly.instantiateStreaming(fetch(<span class="hljs-string">&quot;main.wasm&quot;</span>), go.importObject)</span>
<span class="javascript">            .then(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> &#123;</span>
                go.run(result.instance);
<span class="javascript">                <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;status&quot;</span>).textContent = <span class="hljs-string">&quot;WebAssemblyå·²åŠ è½½&quot;</span>;</span>
                
<span class="javascript">                <span class="hljs-comment">// åˆå§‹åŒ–å›¾è¡¨</span></span>
                initChart();
            &#125;);
        
<span class="javascript">        <span class="hljs-keyword">let</span> chart;</span>
<span class="javascript">        <span class="hljs-keyword">let</span> rawData;</span>
        
<span class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initChart</span>(<span class="hljs-params"></span>) </span>&#123;</span>
<span class="javascript">            <span class="hljs-keyword">const</span> ctx = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;chart&#x27;</span>).getContext(<span class="hljs-string">&#x27;2d&#x27;</span>);</span>
<span class="javascript">            chart = <span class="hljs-keyword">new</span> Chart(ctx, &#123;</span>
<span class="javascript">                type: <span class="hljs-string">&#x27;line&#x27;</span>,</span>
                data: &#123;
                    datasets: [
                        &#123;
<span class="javascript">                            label: <span class="hljs-string">&#x27;åŸå§‹æ•°æ®&#x27;</span>,</span>
<span class="javascript">                            borderColor: <span class="hljs-string">&#x27;rgb(75, 192, 192)&#x27;</span>,</span>
                            data: []
                        &#125;,
                        &#123;
<span class="javascript">                            label: <span class="hljs-string">&#x27;ç§»åŠ¨å¹³å‡&#x27;</span>,</span>
<span class="javascript">                            borderColor: <span class="hljs-string">&#x27;rgb(255, 99, 132)&#x27;</span>,</span>
                            data: []
                        &#125;
                    ]
                &#125;,
                options: &#123;
<span class="javascript">                    responsive: <span class="hljs-literal">true</span>,</span>
                    scales: &#123;
                        x: &#123;
                            title: &#123;
<span class="javascript">                                display: <span class="hljs-literal">true</span>,</span>
<span class="javascript">                                text: <span class="hljs-string">&#x27;X&#x27;</span></span>
                            &#125;
                        &#125;,
                        y: &#123;
                            title: &#123;
<span class="javascript">                                display: <span class="hljs-literal">true</span>,</span>
<span class="javascript">                                text: <span class="hljs-string">&#x27;Y&#x27;</span></span>
                            &#125;
                        &#125;
                    &#125;
                &#125;
            &#125;);
        &#125;
        
<span class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateChart</span>(<span class="hljs-params"></span>) </span>&#123;</span>
<span class="javascript">            <span class="hljs-keyword">const</span> points = <span class="hljs-built_in">parseInt</span>(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;points&quot;</span>).value);</span>
<span class="javascript">            <span class="hljs-keyword">const</span> amplitude = <span class="hljs-built_in">parseFloat</span>(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;amplitude&quot;</span>).value);</span>
<span class="javascript">            <span class="hljs-keyword">const</span> windowSize = <span class="hljs-built_in">parseInt</span>(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;windowSize&quot;</span>).value);</span>
            
<span class="javascript">            <span class="hljs-comment">// ä½¿ç”¨Goå‡½æ•°ç”Ÿæˆæ•°æ®</span></span>
<span class="javascript">            rawData = <span class="hljs-built_in">JSON</span>.parse(generateSineWave(points, amplitude));</span>
            
<span class="javascript">            <span class="hljs-comment">// ä½¿ç”¨Goå‡½æ•°è®¡ç®—ç§»åŠ¨å¹³å‡</span></span>
<span class="javascript">            <span class="hljs-keyword">const</span> avgData = <span class="hljs-built_in">JSON</span>.parse(calculateMovingAverage(<span class="hljs-built_in">JSON</span>.stringify(rawData), windowSize));</span>
            
<span class="javascript">            <span class="hljs-comment">// æ›´æ–°å›¾è¡¨</span></span>
<span class="javascript">            chart.data.datasets[<span class="hljs-number">0</span>].data = rawData.map(<span class="hljs-function"><span class="hljs-params">point</span> =&gt;</span> (&#123;<span class="hljs-attr">x</span>: point.x, <span class="hljs-attr">y</span>: point.y&#125;));</span>
<span class="javascript">            chart.data.datasets[<span class="hljs-number">1</span>].data = avgData.map(<span class="hljs-function"><span class="hljs-params">point</span> =&gt;</span> (&#123;<span class="hljs-attr">x</span>: point.x, <span class="hljs-attr">y</span>: point.y&#125;));</span>
            chart.update();
        &#125;
    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Go WebAssembly æ•°æ®å¯è§†åŒ–<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;status&quot;</span>&gt;</span>æ­£åœ¨åŠ è½½WebAssembly...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;controls&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
                æ•°æ®ç‚¹æ•°é‡:
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;number&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;points&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;100&quot;</span> <span class="hljs-attr">min</span>=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-attr">max</span>=<span class="hljs-string">&quot;1000&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
                æŒ¯å¹…:
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;number&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;amplitude&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1&quot;</span> <span class="hljs-attr">min</span>=<span class="hljs-string">&quot;0.1&quot;</span> <span class="hljs-attr">max</span>=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-attr">step</span>=<span class="hljs-string">&quot;0.1&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
                ç§»åŠ¨å¹³å‡çª—å£å¤§å°:
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;number&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;windowSize&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;5&quot;</span> <span class="hljs-attr">min</span>=<span class="hljs-string">&quot;2&quot;</span> <span class="hljs-attr">max</span>=<span class="hljs-string">&quot;20&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;updateChart()&quot;</span>&gt;</span>æ›´æ–°å›¾è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;chart-container&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;chart&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre>
<h3 id="4-æ ·å¼æ–‡ä»¶ï¼ˆstyle-cssï¼‰"><a class="header-anchor" href="#4-æ ·å¼æ–‡ä»¶ï¼ˆstyle-cssï¼‰"></a>4. æ ·å¼æ–‡ä»¶ï¼ˆstyle.cssï¼‰</h3>
<pre><code class="hljs css"><span class="hljs-selector-tag">body</span> &#123;
    <span class="hljs-attribute">font-family</span>: Arial, sans-serif;
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
&#125;

<span class="hljs-selector-class">.container</span> &#123;
    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">800px</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
    <span class="hljs-attribute">background</span>: white;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
&#125;

<span class="hljs-selector-tag">h1</span> &#123;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
    <span class="hljs-attribute">text-align</span>: center;
&#125;

<span class="hljs-selector-class">.controls</span> &#123;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> <span class="hljs-number">0</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-wrap</span>: wrap;
    <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">align-items</span>: center;
&#125;

<span class="hljs-selector-class">.controls</span> <span class="hljs-selector-tag">label</span> &#123;
    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;
&#125;

<span class="hljs-selector-class">.controls</span> <span class="hljs-selector-tag">input</span> &#123;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span>;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
&#125;

<span class="hljs-selector-tag">button</span> &#123;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">16px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#4CAF50</span>;
    <span class="hljs-attribute">color</span>: white;
    <span class="hljs-attribute">border</span>: none;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
    <span class="hljs-attribute">cursor</span>: pointer;
&#125;

<span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:hover</span> &#123;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#45a049</span>;
&#125;

<span class="hljs-selector-class">.chart-container</span> &#123;
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;
&#125;

<span class="hljs-selector-id">#status</span> &#123;
    <span class="hljs-attribute">text-align</span>: center;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;
&#125;</code></pre>
<h2 id="ğŸš€-æ€§èƒ½ä¼˜åŒ–æŠ€å·§"><a class="header-anchor" href="#ğŸš€-æ€§èƒ½ä¼˜åŒ–æŠ€å·§"></a>ğŸš€ æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h2>
<p>åœ¨ä½¿ç”¨Go WebAssemblyæ—¶ï¼Œæ€§èƒ½ä¼˜åŒ–éå¸¸é‡è¦ï¼Œä¸‹é¢æ˜¯ä¸€äº›å®ç”¨çš„ä¼˜åŒ–æŠ€å·§ï¼š</p>
<h3 id="1-æœ€å°åŒ–Goå’ŒJavaScriptä¹‹é—´çš„é€šä¿¡"><a class="header-anchor" href="#1-æœ€å°åŒ–Goå’ŒJavaScriptä¹‹é—´çš„é€šä¿¡"></a>1. æœ€å°åŒ–Goå’ŒJavaScriptä¹‹é—´çš„é€šä¿¡</h3>
<p>æ¯æ¬¡è·¨è¾¹ç•Œè°ƒç”¨éƒ½æœ‰ä¸€å®šå¼€é”€ï¼Œå°½é‡æ‰¹é‡å¤„ç†ï¼š</p>
<pre><code class="hljs go"><span class="hljs-comment">// ä½æ•ˆæ–¹å¼ï¼šé¢‘ç¹è·¨è¾¹ç•Œè°ƒç”¨</span>
<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++ &#123;
    js.Global().Call(<span class="hljs-string">&quot;processItem&quot;</span>, i)
&#125;

<span class="hljs-comment">// ä¼˜åŒ–æ–¹å¼ï¼šä¸€æ¬¡æ€§ä¼ é€’æ•°æ®</span>
items := js.Global().Get(<span class="hljs-string">&quot;Array&quot;</span>).New(<span class="hljs-number">1000</span>)
<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++ &#123;
    items.SetIndex(i, i)
&#125;
js.Global().Call(<span class="hljs-string">&quot;processItems&quot;</span>, items)</code></pre>
<h3 id="2-ä½¿ç”¨TypedArraysè¿›è¡ŒäºŒè¿›åˆ¶æ•°æ®äº¤æ¢"><a class="header-anchor" href="#2-ä½¿ç”¨TypedArraysè¿›è¡ŒäºŒè¿›åˆ¶æ•°æ®äº¤æ¢"></a>2. ä½¿ç”¨TypedArraysè¿›è¡ŒäºŒè¿›åˆ¶æ•°æ®äº¤æ¢</h3>
<p>å¯¹äºå¤§å‹æ•°æ®ä¼ è¾“ï¼Œä½¿ç”¨TypedArraysæ¯”JSONåºåˆ—åŒ–æ•ˆç‡æ›´é«˜ï¼š</p>
<pre><code class="hljs go"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªFloat64Array</span>
length := <span class="hljs-number">1000</span>
array := js.Global().Get(<span class="hljs-string">&quot;Float64Array&quot;</span>).New(length)

<span class="hljs-comment">// å°†Goæ•°æ®å¤åˆ¶åˆ°TypedArray</span>
<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; length; i++ &#123;
    array.SetIndex(i, math.Sin(<span class="hljs-keyword">float64</span>(i)*<span class="hljs-number">0.01</span>))
&#125;

<span class="hljs-comment">// å°†TypedArrayä¼ é€’ç»™JavaScript</span>
js.Global().Call(<span class="hljs-string">&quot;processArray&quot;</span>, array)</code></pre>
<h3 id="3-é¿å…é¢‘ç¹å†…å­˜åˆ†é…"><a class="header-anchor" href="#3-é¿å…é¢‘ç¹å†…å­˜åˆ†é…"></a>3. é¿å…é¢‘ç¹å†…å­˜åˆ†é…</h3>
<p>é‡ç”¨å¯¹è±¡ä»¥å‡å°‘åƒåœ¾å›æ”¶ï¼š</p>
<pre><code class="hljs go"><span class="hljs-comment">// ç¼“å­˜å¸¸ç”¨JSå¯¹è±¡å¼•ç”¨</span>
<span class="hljs-keyword">var</span> (
    document = js.Global().Get(<span class="hljs-string">&quot;document&quot;</span>)
    console  = js.Global().Get(<span class="hljs-string">&quot;console&quot;</span>)
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">updateUI</span><span class="hljs-params">()</span></span> &#123;
    <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨ç¼“å­˜çš„å¼•ç”¨</span>
    document.Call(<span class="hljs-string">&quot;getElementById&quot;</span>, <span class="hljs-string">&quot;status&quot;</span>).Set(<span class="hljs-string">&quot;textContent&quot;</span>, <span class="hljs-string">&quot;æ›´æ–°å®Œæˆ&quot;</span>)
    console.Call(<span class="hljs-string">&quot;log&quot;</span>, <span class="hljs-string">&quot;UIå·²æ›´æ–°&quot;</span>)
&#125;</code></pre>
<h3 id="4-ä½¿ç”¨Workerè¿›è¡Œå¹¶è¡Œå¤„ç†"><a class="header-anchor" href="#4-ä½¿ç”¨Workerè¿›è¡Œå¹¶è¡Œå¤„ç†"></a>4. ä½¿ç”¨Workerè¿›è¡Œå¹¶è¡Œå¤„ç†</h3>
<p>Go WebAssemblyå¯ä»¥åœ¨Web Workerä¸­è¿è¡Œï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼š</p>
<pre><code class="hljs javascript"><span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> Worker(<span class="hljs-string">&#x27;worker.js&#x27;</span>);
worker.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>&#123;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;ä»Workeræ”¶åˆ°ç»“æœ:&#x27;</span>, e.data);
&#125;;
worker.postMessage(&#123;<span class="hljs-attr">action</span>: <span class="hljs-string">&#x27;process&#x27;</span>, <span class="hljs-attr">data</span>: [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]&#125;);

<span class="hljs-comment">// worker.js</span>
importScripts(<span class="hljs-string">&#x27;wasm_exec.js&#x27;</span>);

<span class="hljs-keyword">const</span> go = <span class="hljs-keyword">new</span> Go();
WebAssembly.instantiateStreaming(fetch(<span class="hljs-string">&quot;worker.wasm&quot;</span>), go.importObject)
    .then(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> &#123;
        go.run(result.instance);
        
        <span class="hljs-comment">// æ¥æ”¶æ¥è‡ªä¸»çº¿ç¨‹çš„æ¶ˆæ¯</span>
        self.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>&#123;
            <span class="hljs-keyword">if</span> (e.data.action === <span class="hljs-string">&#x27;process&#x27;</span>) &#123;
                <span class="hljs-comment">// è°ƒç”¨Goå‡½æ•°å¤„ç†æ•°æ®</span>
                <span class="hljs-keyword">const</span> result = processData(e.data.data);
                <span class="hljs-comment">// å°†ç»“æœå‘é€å›ä¸»çº¿ç¨‹</span>
                self.postMessage(result);
            &#125;
        &#125;;
    &#125;);</code></pre>
<h2 id="ğŸ”-è°ƒè¯•æŠ€å·§"><a class="header-anchor" href="#ğŸ”-è°ƒè¯•æŠ€å·§"></a>ğŸ” è°ƒè¯•æŠ€å·§</h2>
<p>WebAssemblyè°ƒè¯•å¯èƒ½æ¯”è¾ƒæ£˜æ‰‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›æœ‰ç”¨çš„æŠ€å·§ï¼š</p>
<h3 id="1-ä½¿ç”¨console-logè¿›è¡Œè°ƒè¯•"><a class="header-anchor" href="#1-ä½¿ç”¨console-logè¿›è¡Œè°ƒè¯•"></a>1. ä½¿ç”¨console.logè¿›è¡Œè°ƒè¯•</h3>
<p>åœ¨Goä¸­ï¼Œä½¿ç”¨<code>println</code>æˆ–é€šè¿‡JavaScriptçš„<code>console.log</code>ï¼š</p>
<pre><code class="hljs go"><span class="hljs-comment">// Goä¸­çš„åŸç”Ÿprintlnï¼ˆè¾“å‡ºåˆ°æµè§ˆå™¨æ§åˆ¶å°ï¼‰</span>
<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;Debug:&quot;</span>, someValue)

<span class="hljs-comment">// æˆ–é€šè¿‡JavaScriptçš„console.log</span>
js.Global().Get(<span class="hljs-string">&quot;console&quot;</span>).Call(<span class="hljs-string">&quot;log&quot;</span>, <span class="hljs-string">&quot;Debug:&quot;</span>, someValue)</code></pre>
<h3 id="2-ä½¿ç”¨Chrome-DevTools"><a class="header-anchor" href="#2-ä½¿ç”¨Chrome-DevTools"></a>2. ä½¿ç”¨Chrome DevTools</h3>
<p>Chromeæµè§ˆå™¨ç°åœ¨æ”¯æŒWebAssemblyè°ƒè¯•ï¼š</p>
<ol>
<li>æ‰“å¼€Chrome DevTools</li>
<li>è½¬åˆ°Sourcesæ ‡ç­¾</li>
<li>åœ¨å·¦ä¾§é¢æ¿æ‰¾åˆ°.wasmæ–‡ä»¶</li>
<li>å¯ä»¥çœ‹åˆ°åæ±‡ç¼–çš„WebAssemblyä»£ç </li>
<li>è®¾ç½®æ–­ç‚¹å¹¶æ£€æŸ¥æ•°æ®</li>
</ol>
<h3 id="3-å®ç°é”™è¯¯å¤„ç†"><a class="header-anchor" href="#3-å®ç°é”™è¯¯å¤„ç†"></a>3. å®ç°é”™è¯¯å¤„ç†</h3>
<p>åŒ…è£…Goå‡½æ•°ä»¥æ•è·å¹¶æŠ¥å‘Šé”™è¯¯ï¼š</p>
<pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">safeJsFunc</span><span class="hljs-params">(fn <span class="hljs-keyword">func</span>(js.Value, []js.Value)</span> <span class="hljs-title">interface</span></span>&#123;&#125;) js.Func &#123;
    <span class="hljs-keyword">return</span> js.FuncOf(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(this js.Value, args []js.Value)</span> <span class="hljs-title">interface</span></span>&#123;&#125; &#123;
        <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;
            <span class="hljs-keyword">if</span> r := <span class="hljs-built_in">recover</span>(); r != <span class="hljs-literal">nil</span> &#123;
                js.Global().Get(<span class="hljs-string">&quot;console&quot;</span>).Call(<span class="hljs-string">&quot;error&quot;</span>, <span class="hljs-string">&quot;Goå‡½æ•°é”™è¯¯:&quot;</span>, r)
            &#125;
        &#125;()
        <span class="hljs-keyword">return</span> fn(this, args)
    &#125;)
&#125;

<span class="hljs-comment">// ä½¿ç”¨</span>
js.Global().Set(<span class="hljs-string">&quot;myFunction&quot;</span>, safeJsFunc(actualFunction))</code></pre>
<h2 id="ğŸ”®-æœªæ¥å±•æœ›ä¸å±€é™æ€§"><a class="header-anchor" href="#ğŸ”®-æœªæ¥å±•æœ›ä¸å±€é™æ€§"></a>ğŸ”® æœªæ¥å±•æœ›ä¸å±€é™æ€§</h2>
<p>Go WebAssemblyè™½ç„¶æœ‰å·¨å¤§æ½œåŠ›ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›å±€é™æ€§ï¼š</p>
<h3 id="ä¼˜åŠ¿"><a class="header-anchor" href="#ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h3>
<ul>
<li>Goçš„å¼ºå¤§ç±»å‹ç³»ç»Ÿå’Œå¹¶å‘æ¨¡å‹</li>
<li>èƒ½å¤Ÿå¤ç”¨ç°æœ‰çš„Goä»£ç </li>
<li>åœ¨æµè§ˆå™¨ä¸­å®ç°æ¥è¿‘åŸç”Ÿçš„æ€§èƒ½</li>
<li>å¯ä»¥ä½¿ç”¨Goç”Ÿæ€ç³»ç»Ÿä¸­çš„åº“</li>
</ul>
<h3 id="å±€é™æ€§"><a class="header-anchor" href="#å±€é™æ€§"></a>å±€é™æ€§</h3>
<ul>
<li>äºŒè¿›åˆ¶å¤§å°é—®é¢˜ï¼šGo WebAssemblyé€šå¸¸æ¯”Rustæˆ–C++ç¼–è¯‘çš„äºŒè¿›åˆ¶æ›´å¤§</li>
<li>åƒåœ¾æ”¶é›†å™¨å¼€é”€ï¼šGoçš„GCå¯èƒ½ä¼šå¯¼è‡´å¶å°”çš„å¡é¡¿</li>
<li>DOMæ“ä½œä¸å¤ŸåŸç”Ÿï¼šä¸JavaScriptç›¸æ¯”ï¼ŒDOMæ“ä½œè¾ƒç¹ç</li>
<li>å·¥å…·æ”¯æŒä»åœ¨å®Œå–„ä¸­</li>
</ul>
<h3 id="æœªæ¥å‘å±•è¶‹åŠ¿"><a class="header-anchor" href="#æœªæ¥å‘å±•è¶‹åŠ¿"></a>æœªæ¥å‘å±•è¶‹åŠ¿</h3>
<ul>
<li>WASIï¼ˆWebAssemblyç³»ç»Ÿæ¥å£ï¼‰çš„å‘å±•å°†ä½¿WebAssemblyç”¨é€”æ›´å¹¿</li>
<li>ç»„ä»¶æ¨¡å‹å°†æ”¹è¿›æ¨¡å—åŒ–å’Œäº’æ“ä½œæ€§</li>
<li>åƒåœ¾æ”¶é›†å™¨ææ¡ˆå°†æå‡Goç­‰è¯­è¨€çš„è¡¨ç°</li>
<li>å¤šçº¿ç¨‹æ”¯æŒå°†æ”¹è¿›å¹¶å‘æ€§èƒ½</li>
</ul>
<h2 id="ğŸ“-æ€»ç»“"><a class="header-anchor" href="#ğŸ“-æ€»ç»“"></a>ğŸ“ æ€»ç»“</h2>
<p>Go WebAssemblyä¸ºå¼€å‘è€…æä¾›äº†ä¸€ç§åœ¨Webå‰ç«¯ä½¿ç”¨Goè¯­è¨€èƒ½åŠ›çš„é€”å¾„ã€‚è™½ç„¶å­˜åœ¨ä¸€äº›å±€é™æ€§ï¼Œä½†éšç€WebAssemblyæŠ€æœ¯çš„ä¸æ–­æˆç†Ÿï¼Œè¿™äº›é™åˆ¶å°†é€æ¸è¢«è§£å†³ã€‚</p>
<p>å¯¹äºä»¥ä¸‹åœºæ™¯ï¼ŒGo WebAssemblyç‰¹åˆ«æœ‰ä»·å€¼ï¼š</p>
<ul>
<li>å¸Œæœ›åœ¨å‰ç«¯å¤ç”¨Goåç«¯ä»£ç çš„åº”ç”¨</li>
<li>éœ€è¦é«˜æ€§èƒ½è®¡ç®—çš„Webåº”ç”¨ï¼ˆå¦‚æ•°æ®å¤„ç†ã€å›¾å½¢å¤„ç†ï¼‰</li>
<li>å¯¹ç±»å‹å®‰å…¨å’Œå¹¶å‘æ€§æœ‰é«˜è¦æ±‚çš„å‰ç«¯åº”ç”¨</li>
</ul>
<p>å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ å¼€å§‹ä½¿ç”¨Go WebAssemblyï¼Œæ¢ç´¢è¿™ä¸€æ¿€åŠ¨äººå¿ƒçš„æŠ€æœ¯ã€‚å¦‚æœä½ æœ‰é—®é¢˜æˆ–ç»éªŒè¦åˆ†äº«ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµï¼</p>

            </article>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Golang/">Golang</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Go/">Go</a>
                    
                      <a class="hover-with-bg" href="/tags/WebAssembly/">WebAssembly</a>
                    
                      <a class="hover-with-bg" href="/tags/Wasm/">Wasm</a>
                    
                      <a class="hover-with-bg" href="/tags/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a>
                    
                  </div>
                
              </div>
              
              
                <div class="post-prevnext row">
                  <div class="post-prev col-6">
                    
                    
                      <a href="/2024/12/27/DevOps%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E4%B8%8E%E9%83%A8%E7%BD%B2%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">ğŸš€ DevOpsè‡ªåŠ¨åŒ–æµ‹è¯•ä¸éƒ¨ç½²æœ€ä½³å®è·µ</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </div>
                  <div class="post-next col-6">
                    
                    
                      <a href="/2024/11/15/AI%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%BE%85%E5%8A%A9Go%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/">
                        <span class="hidden-mobile">ğŸ¤– AIå¤§æ¨¡å‹è¾…åŠ©Goä»£ç ç”Ÿæˆæœ€ä½³å®è·µ</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </div>
                </div>
              
            </div>

            
              <!-- Comments -->
              <div class="comments" id="comments">
                
                
  <div class="disqus" style="width:100%">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      function loadDisqus() {
        var disqus_config = function () {
          this.page.url = 'https://blog.bopop.sbs/2024/12/05/Goè¯­è¨€ä¸WebAssemblyå®æˆ˜æŒ‡å—/';
          this.page.identifier = '/2024/12/05/Goè¯­è¨€ä¸WebAssemblyå®æˆ˜æŒ‡å—/';
        };
        (function () {
          var d = document,
            s = d.createElement('script');
          s.src = '//' + '' + '.disqus.com/embed.js';
          s.setAttribute('data-timestamp', new Date());
          (d.head || d.body).appendChild(s);
        })();
      }
      createObserver(loadDisqus, 'disqus_thread');
    </script>
    <noscript>Please enable JavaScript to view the
      <a target="_blank" href="https://disqus.com/?ref_noscript" rel="nofollow noopener noopener">comments powered by Disqus.</a>
    </noscript>
  </div>


              </div>
            
          </div>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  
    <div class="col-lg-7 mx-auto nopadding-md">
      <div class="container custom mx-auto">
        <img src="/img/Bopop-logo.png" srcset="/img/loading.gif" class="rounded mx-auto d-block mt-5" style="width:220px; height:150px;">
      </div>
    </div>
  

  <footer class="mt-5">
  <div class="text-center py-3">
    <div>
      <!-- <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a> -->
        <span>Â© Bopop</span>
    </div>
    

    

    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/main.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>







  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: 'article.markdown-body',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 0,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>





  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>




















</body>
</html>
